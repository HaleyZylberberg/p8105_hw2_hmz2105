---
title: "P8105 HW 2"
author: "Haley Zylberberg"
output: github_document
---

Will first call in tidyverse and readxl libraries.

```{r}
library(tidyverse)
library(readxl)
```

## Problem 2: Clean Trash Wheel Datasets

First, import Trash Wheel dataset, specifically sheet Mr Trash Wheel, and clean. We need to skip column 1 as it contains pictures, not include blank columns, and also not import the last row as it includes data summary elements. We also need to convert dumpert variable to numeric as it is coded as characters. And finally, we need to pivot the trash types in order to make a tidy dataset.
```{r}
mr_trash_df = 
  read_excel("data/202207 Trash Wheel Collection Data.xlsx",
  sheet = "Mr. Trash Wheel", skip = 1, range = cell_cols(1:14)) |> 
  janitor::clean_names() |>
  subset(!is.na(dumpster) & dumpster != "") |>
  mutate(trash_wheel = "Mr", year = as.numeric(year)) |> 
  relocate(trash_wheel) |>
   pivot_longer(
    plastic_bottles:sports_balls,
    names_to = "litter_type",
    values_to = "litter_amount"
  )

```

Calculate new homes powered column based on note that 1 ton garbage = 500KW of electricity and 30KW powers 1 house.
```{r}
mr_trash_df = 
mutate (mr_trash_df, homes_powered = (weight_tons*500)/30)
```

Next, import Prof. Trash Wheel dataset, clean, and create new homes_powered variable.
```{r}
prof_trash_df = 
  read_excel("data/202207 Trash Wheel Collection Data.xlsx",
  sheet = "Professor Trash Wheel", skip = 1, range = cell_cols(1:13)) |> 
  janitor::clean_names() |>
  subset(!is.na(dumpster) & dumpster != "") |>
  mutate(trash_wheel = "Prof", year = as.numeric(year)) |> 
  relocate(trash_wheel) |>
   pivot_longer(
    plastic_bottles:chip_bags,
    names_to = "litter_type",
    values_to = "litter_amount"
  ) |>
mutate (homes_powered = (weight_tons*500)/30)
```

Next, import Gwynnda Trash Wheel dataset, clean, and create new homes_powered variable.
```{r}
gwynnda_trash_df = 
  read_excel("data/202207 Trash Wheel Collection Data.xlsx",
  sheet = "Gwynnda Trash Wheel", skip = 1, range = cell_cols(1:11)) |> 
  janitor::clean_names() |>
  subset(!is.na(dumpster) & dumpster != "") |>
  mutate(trash_wheel = "Gwynnda", year = as.numeric(year)) |> 
  relocate(trash_wheel) |>
   pivot_longer(
    plastic_bottles:plastic_bags,
    names_to = "litter_type",
    values_to = "litter_amount"
  ) |>
mutate (homes_powered = (weight_tons*500)/30)
```

Combine all 3 trash wheels dataframes.
```{r}
trash_wheel_df = 
  bind_rows(mr_trash_df, prof_trash_df, gwynnda_trash_df)
```

The dataframe Trash Wheel consists of combined data from Mister Trash Wheel, Professor Trash Wheel and Gwynnda Trash Wheel. There are `r nrow(trash_wheel_df)` observations. The variables in the dataframe are `r names(trash_wheel_df)`. The types of litter collected are `r unique(trash_wheel_df[["litter_type"]])`. The total weight of trash collected by Professor Trash Wheel is `r sum((trash_wheel_df |> filter(trash_wheel == "Prof") |> group_by(dumpster) |> summarize(trash_collected = first(weight_tons)))[["trash_collected"]])`. The total weight of trash collected by Mr. Trash Wheel is `r sum((trash_wheel_df |> filter(trash_wheel == "Mr") |> group_by(dumpster) |> summarize(trash_collected = first(weight_tons)))[["trash_collected"]])`. And the total weight of trash collected by Gwynnda Trash Wheel is `r sum((trash_wheel_df |> filter(trash_wheel == "Gwynnda") |> group_by(dumpster) |> summarize(trash_collected = first(weight_tons)))[["trash_collected"]])`. 




